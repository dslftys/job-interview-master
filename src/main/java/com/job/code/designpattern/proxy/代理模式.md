# 代理模式

## 定义

代理模式是对象的结构模式。代理模式给某一个对象提供一个代理对象，并由代理对象控制对原对象的引用。
## 作用

被代理类A  ==方法增强==> 代理类B （增强方法，保护真实类）

比如：火车站售票处（卖票和退票的功能） ==代理类==> 火车站代售处（卖票功能）

## 分类

远程代理：为不同地域的对象提供局域网代表的对象，
虚拟代理：大对象的延迟创建，保护代理：控制对一个对象的访问权限，智能引用代理：对目标对象提供一些额外的服务

## 实现（智能引用代理）

### 静态代理

在编译前已经完成了代理工作，即编写两个类都实现了相同的接口或继承了相同的类。

方法一：继承（不推荐）

方法二：聚合（实现接口）

### 动态代理

运行中，动态为真实类生成对应的代理类并加载。

方法一：JDK动态代理（反射） 注：必须实现接口

方法二：CGLIB动态代理（继承）
##应用场景
就是一个人或者机构代表另一个人或者机构采取行动。在一些情况下，一个客户不想或者不能够直接引用一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用。
##角色介绍
* 抽象对象角色：声明了目标对象和代理对象的共同接口，这样一来在任何可以使用目标对象的地方都可以使用代理对象。
* 目标对象角色：定义了代理对象所代表的目标对象。
* 代理对象角色：代理对象内部含有目标对象的引用，从而可以在任何时候操作目标对象；代理对象提供一个与目标对象相同的接口，以便可以在任何时候替代目标对象。代理对象通常在客户端调用传递给目标对象之前或之后，执行某个操作，而不是单纯地将调用传递给目标对象。

## 应用

EJB、Web Service等分布式技术都是代理模式的应用。在EJB中使用了RMI机制，远程服务器中的企业级Bean在本地有一个桩代理，客户端通过桩来调用远程对象中定义的方法，而无须直接与远程对象交互。在EJB的使用中需要提供一个公共的接口，客户端针对该接口进行编程，无须知道桩以及远程EJB的实现细节。

##优点与缺点
---

优点

给对象增加了本地化的扩展性，增加了存取操作控制

缺点

会产生多余的代理类